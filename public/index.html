<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>cccccccclick!!!!</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%2210 0 100 100%22><text y=%22.90em%22 font-size=%2290%22>üêà</text></svg>"></link>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <meta property="og:url" content="http://localhost:8080"/>
    <meta property="og:type" content="website"/>
    <meta property="og:title" content="„Åü„Åè„Åï„Çì„ÇØ„É™„ÉÉ„ÇØ„Åï„Çå„ÅüÁå´" id="og_title" />
    <meta property="og:description" content="üêà„Çí„Åü„Åè„Åï„Çì„ÇØ„É™„ÉÉ„ÇØ„Åó„Çà„ÅÜ"/>
    <meta property="og:locale" content="ja-jp"/>
    <meta property="og:image" content="/cat1.jpg"/>
    <meta property="og:image:type" content="image/jpeg"/>
    <meta property="og:image:width" content="640"/>
    <meta property="og:image:height" content="426"/>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP&display=swap&text=0123456789%2C%E5%9B%9E%E3%82%AF%E3%83%AA%E3%83%83%E3%82%AF%E3%81%95%E3%82%8C%E3%81%9F%E7%8C%AB" rel="stylesheet">
    <style>
        body {
            font-family: "Noto Sans JP", sans-serif;
            font-optical-sizing: auto;
            font-weight: 400;
            font-style: normal;
            margin: 0;
            padding: 0;
            background: #e9e9e9;
            color: #333333;
        }
        h1 {
            text-align: center;
        }
        #container {
            position: relative;
            width: 640px;
            margin: 0 auto;
            overflow: hidden;
            cursor: pointer;
            user-select: none;
        }
        img {
            display: block;
            margin: 0 auto;
            opacity: 0.8;
            transition: all 0.1s;
            z-index: 1;
            background-color: #000000;
        }
        img:hover {
            opacity: 1.0;
            transform: scale(1.02, 1.02);
        }
        img:active {
            transform: scale(1.01, 1.01);
        }
        .ripple {
            transition: all 0.1s;
            position: absolute;
            user-select: none;
            pointer-events: none;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            transform: scale(0);
            animation: ripple 300ms ease-out;
            background-color: rgba(255, 255, 255, 0.3);
        }
        @keyframes ripple {
            from {
                transform: scale(1);
                opacity: 0.5;
            }
            to {
                transform: scale(50);
                opacity: 0;
            }
        }
        footer {
            font-size: 0.8em;
            text-align: center;
            color: #666666;
        }
    </style>
  </head>
  <body>
    <p>
        <div id="container">
            <img id="cat" src="/cat1.jpg" alt="Cat" width="640" height="426" draggable="false" />
        </div>
    </p>
    <h1>
        <span id="count"></span>
        <span>Âõû„ÇØ„É™„ÉÉ„ÇØ„Åï„Çå„ÅüÁå´</span>
    </h1>
    <footer>
        Photo by <a href="https://www.pexels.com/ja-jp/photo/730896/" target="_blank" rel="noopener noreferrer">Pexels CC0</a><br />
        Copyright &copy; 2025 <a href="https://twitter.com/akai_inu" target="_blank" rel="noopener noreferrer">@yamayuski</a>
    </footer>
    <script type="module">
        window.addEventListener('load', async () => {
            const container = document.getElementById('container');
            const catImage = document.getElementById('cat');
            const countSpan = document.getElementById('count');

            // ÂèñÂæó„Åó„ÅüÊñáÂ≠óÂàó„ÇíÊï∞ÂÄ§„Å´Â§âÊèõ„Åó„Å¶3Ê°ÅÂå∫Âàá„Çä„ÅÆÊñáÂ≠óÂàó„ÇíËøî„Åô
            function formatCount(text) {
                const n = Number(String(text).trim());
                if (!Number.isFinite(n)) return '0';
                return n.toLocaleString('ja-JP');
            }

            container.addEventListener('click', async (e) => {
                const x = e.offsetX;
                const y = e.offsetY;
                const ripple = document.createElement('div');
                ripple.className = 'ripple';
                ripple.style.left = `${x}px`;
                ripple.style.top = `${y}px`;
                container.appendChild(ripple);
                setTimeout(() => {
                    ripple.remove();
                }, 600);
                const response = await fetch('/click', { method: 'POST' });
                const newCount = await response.text();
                countSpan.textContent = formatCount(newCount);
            });

            const response = await fetch('/click');
            const currentCount = await response.text();
            countSpan.textContent = formatCount(currentCount);
        });
    </script>
  </body>
</html>
